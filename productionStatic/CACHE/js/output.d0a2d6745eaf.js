"use strict";document.addEventListener('DOMContentLoaded',function(event){console.log(`${event.type} Event Fired`);const emailValueTag=document.getElementById('email-textfield');const emailErrorTag=document.getElementById('email-error-area');const passwordValueTag=document.getElementById('password-textfield');const passwordErrorTag=document.getElementById('password-error-area');const confirmValueTag=document.getElementById('confirm-textfield');const confirmErrorTag=document.getElementById('confirm-error-area');if(emailValueTag!==null)emailValueTag.value="";if(passwordValueTag!==null)passwordValueTag.value="";if(confirmValueTag!==null)confirmValueTag.value="";if(emailErrorTag!==null)emailErrorTag.value="";if(passwordErrorTag!==null)passwordErrorTag.value="";if(confirmErrorTag!==null)confirmErrorTag.value="";document.addEventListener('click',(e)=>{const popupErrorsContainerTag=document.getElementById('popup-errors-container');if(!popupErrorsContainerTag.contains(e.target)){popupErrorsContainerTag.style.display='none';}});if(emailValueTag!==null)emailValueTag.addEventListener('input',checkEmail);},{once:true});function closePopupErrors(){document.getElementById('popup-errors-container').style.display='none';}
function checkEmail(){const emailValueTag=document.getElementById('email-textfield');const emailErrorTag=document.getElementById('email-error-area');if(emailValueTag.value.trim()===''){emailErrorTag.textContent='';return false;}
if(!validateEmail(emailValueTag.value)){emailErrorTag.textContent='Invalid email address';return false;}
emailErrorTag.textContent='';return true;}
function validateEmail(email){const re=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;return re.test(email);}
function hideShowPasswordLogin(){const passwordValueTag=document.getElementById('password-textfield');const lambTag=document.getElementById('lamb');if(passwordValueTag.type==='password'){passwordValueTag.type='text';lambTag.style.opacity=0.5;}else{passwordValueTag.type='password';lambTag.style.opacity=1;}}
function hideShowPasswordRegister(){const passwordValueTag=document.getElementById('password-textfield');const confirmValueTag=document.getElementById('confirm-textfield');const lambTag=document.getElementById('lamb');if(passwordValueTag.type==='password'){passwordValueTag.type='text';if(confirmValueTag!==null)confirmValueTag.type='text';lambTag.style.opacity=0.5;}else{passwordValueTag.type='password';if(confirmValueTag!==null)confirmValueTag.type='password';lambTag.style.opacity=1;}}
function openPopupCredentials(){const popup=document.getElementById('popup-credentials-container');popup.style.display='block';setTimeout(function(){popup.style.opacity=1;},10);}
function closePopupCredentials(){const popup=document.getElementById('popup-credentials-container');popup.style.opacity=0;setTimeout(function(){popup.style.display='none';},1010);};"use strict";document.addEventListener('DOMContentLoaded',(event)=>{console.log(`${event.type} Event Fired`);const countryContainerTag=document.getElementById('country-container');const countrySelectTag=document.getElementById('country-select');const countryOptionsContainerTag=countryContainerTag.querySelector('.country-options-container');const staticUrl=countryContainerTag.dataset.flagsUrl;const spritesUrl=countryContainerTag.dataset.spritesJsonUrl;fetch(spritesUrl).then(res=>res.json()).then(data=>{const emptyOption=document.createElement('div');emptyOption.classList.add('country-option');emptyOption.innerHTML=`<span></span><span class="span-country-name"></span>`;countryOptionsContainerTag.appendChild(emptyOption);data.forEach(sprite=>{const option=document.createElement('div');option.classList.add('country-option');option.innerHTML=`<span class="country-flag" style="background-image: url('${staticUrl}'); background-position: -${sprite.x}px -${sprite.y}px; width: ${sprite.width}px; height: ${sprite.height}px; display: inline-block;"></span><span class="span-country-name">${sprite.name}</span>`;countryOptionsContainerTag.appendChild(option);});}).catch(err=>console.error("Error loading sprites JSON:",err));countryOptionsContainerTag.addEventListener('click',(event)=>{const element=event.target.closest('.country-option');console.log(element);const countrySelectTag=document.getElementById('country-select');if(element===null){console.log('Event Delegation: a click event was fired by accident and is successfully ignored');return;}
countrySelectTag.innerHTML=element.innerHTML;const countryName=element.querySelector('.span-country-name').textContent;countrySelectTag.dataset.value=countryName;countryOptionsContainerTag.style.display='none';});countrySelectTag.addEventListener('click',()=>{const isVisible=countryOptionsContainerTag.style.display==='block';countryOptionsContainerTag.style.display=isVisible?'none':'block';});document.addEventListener('click',(e)=>{if(!countryContainerTag.contains(e.target)){countryOptionsContainerTag.style.display='none';}});},{once:true});;"use strict";document.addEventListener('DOMContentLoaded',function(event){console.log(`${event.type} Event Fired`);const passwordValueTag=document.getElementById('password-textfield');const confirmValueTag=document.getElementById('confirm-textfield');passwordValueTag.addEventListener('input',checkIfMatchPasswords);passwordValueTag.addEventListener('input',updatePasswordMeter);confirmValueTag.addEventListener('input',checkIfMatchPasswords);document.getElementById('register-form').addEventListener('submit',function(event){event.preventDefault();const popupErrorsContainerTag=document.getElementById('popup-errors-container');const lazyLoadTag=document.getElementById('lazy-load');const errorsText=document.getElementById('errors-text');if(validateRegisterForm()===false){errorsText.innerHTML='Invalid Form';popupErrorsContainerTag.style.display='block';}
else{lazyLoadTag.style.display='block';registerAsyncPostRequest();console.log("fetch is an async function, i.e. it returns a Promise instead of blocking the main thread. So, this message is printed before JSON POST Reply.");}});function updatePasswordMeter(){const passwordStrongBarTag=document.getElementById('passwordStrongBar');const passwordValueTag=document.getElementById('password-textfield');const passwordErrorTag=document.getElementById('password-error-area');const passwordValue=passwordValueTag.value||'';const score=computePasswordStrength(passwordValue);const percent=(score/5)*90;passwordStrongBarTag.style.width=percent+'%';passwordStrongBarTag.style.backgroundColor="#ff5733";if(score===0){passwordErrorTag.textContent='';}
else if(score===1){passwordErrorTag.textContent='Very Weak Password';}
else if(score===2)passwordErrorTag.textContent='Weak Password';else if(score===3)passwordErrorTag.textContent='Good Password';else if(score===4)passwordErrorTag.textContent='Strong Password';else if(score===5)passwordErrorTag.textContent='Very Strong Password';return score;}
function computePasswordStrength(password){let score=0;if(password.length>=8)score+=1;if(/[A-Z]/.test(password))score+=1;if(/[a-z]/.test(password))score+=1;if(/[0-9]/.test(password))score+=1;if(/[^A-Za-z0-9]/.test(password))score+=1;return score;}
function checkIfMatchPasswords(){const passwordValueTag=document.getElementById('password-textfield');const confirmValueTag=document.getElementById('confirm-textfield');const confirmErrorTag=document.getElementById('confirm-error-area');if((passwordValueTag.value==='')&&(confirmValueTag.value==='')){confirmErrorTag.textContent='Empty Passwords';confirmErrorTag.style.color='red';return false;}
if(passwordValueTag.value===confirmValueTag.value){confirmErrorTag.textContent='Passwords Match';confirmErrorTag.style.color='green';return true;}
else{confirmErrorTag.textContent='Passwords Mismatch';confirmErrorTag.style.color='red';return false;}}
function checkIfPasswordIsStrong(){if(updatePasswordMeter()===5){return true;}
else{return false;}}
function validateRegisterForm(){const emailValueTag=document.getElementById('email-textfield');const passwordValueTag=document.getElementById('password-textfield');const confirmValueTag=document.getElementById('confirm-textfield');if(emailValueTag.value==='')return false;if(passwordValueTag.value==='')return false;if(confirmValueTag.value==='')return false;if(checkIfMatchPasswords()===false)return false;if(checkEmail()===false)return false;if(checkIfPasswordIsStrong()===false)return false;return true;}
function registerAsyncPostRequest(){const popupErrorsContainerTag=document.getElementById('popup-errors-container');const errorsText=document.getElementById('errors-text');const lazyLoadTag=document.getElementById('lazy-load');const userCredentials={email:document.getElementById('email-textfield').value,password:document.getElementById('password-textfield').value,confirm:document.getElementById('confirm-textfield').value,country:document.getElementById('country-select').dataset.value||''};console.log(userCredentials);const url='/register/';let fetchData={method:'POST',body:JSON.stringify(userCredentials),headers:new Headers({'Content-Type':'application/json; charset=UTF-8','X-CSRFToken':document.querySelector('[name=csrfmiddlewaretoken]').value})}
fetch(url,fetchData).then(response=>response.json()).then(responseData=>{if(responseData.status==='success'){lazyLoadTag.style.display='none';openPopupCredentials();document.getElementById('popup-buttons-container').addEventListener('click',function(event){const element=event.target.id;if(element==='yes-button'){localStorage.setItem(`loginCredentials_${userCredentials.email}`,JSON.stringify(userCredentials));}
closePopupCredentials()
lazyLoadTag.style.display='none';window.location.replace('/login/');});}
else{lazyLoadTag.style.display='none';errorsText.innerHTML=responseData.message;popupErrorsContainerTag.style.display='block';}}).catch(error=>{lazyLoadTag.style.display='none';console.error('Error:',error);});}},{once:true});;